"use strict";window.addEventListener("DOMContentLoaded",function(){function e(e,t){return window.getComputedStyle?window.getComputedStyle(e,null)[t]:e.currentStyle[t]}var t=document.querySelectorAll(".goodinfo2 li"),l=document.getElementById("middleImg"),o=document.getElementById("middleImg").children[0],n=document.querySelector("#middleArea"),r=document.querySelector("#bigImg"),i=document.querySelector("#bigArea"),s=(document.querySelector(".goodinfo .one"),document.querySelector(".goodinfo2"));n.style.width=parseFloat(e(l,"width"))/parseFloat(e(r,"width"))*parseFloat(e(i,"width"))+"px",n.style.height=parseFloat(e(l,"height"))/parseFloat(e(r,"height"))*parseFloat(e(i,"height"))+"px";var a=JSON.parse(localStorage.getItem("goodsInfo"));a||(alert("你要查看的数据不存在"),window.location.href="./list.html"),$(".namename").html(a.info),$("#middleImg img").attr("src",a.image),$(".product-title").html(a.info),$(".price-current span").html(a.price),$(".m-top20 .hh").html(a.num1.substring(4)),$(".m-top20 .xh").html(a.num2.substring(5)),$(".m-top20 .hq").html(a.date.substring(4)),$("#small ul").find(".yi img").attr("src",a.image),$("#bigImg").attr("src",a.image);var d=parseFloat(e(i,"width"))/parseFloat(e(n,"width"));l.addEventListener("mouseenter",function(){n.style.display="block",i.style.display="block",document.onmousemove=function(e){var t=e||window.event,o=t.pageX-s.offsetLeft-n.offsetWidth/2,i=t.pageY-s.offsetTop-n.offsetHeight/2;o<=0&&(o=0),o>=l.offsetWidth-n.offsetWidth&&(o=l.offsetWidth-n.offsetWidth),i<=0&&(i=0),i>=l.offsetHeight-n.offsetHeight&&(i=l.offsetHeight-n.offsetHeight),n.style.left=o+"px",n.style.top=i+"px",r.style.left=-d*o+"px",r.style.top=-d*i+"px"}}),l.addEventListener("mouseleave",function(){n.style.display="none",i.style.display="none",document.onmousemove=null});for(var m=0;m<t.length;m++)t[m].tempIndex=m,t[m].onclick=function(){for(var e=0;e<t.length;e++)t[e].className="";this.className="Liclass",o.src=$(this).find("img").attr("src"),r.src=a.image};$(".addCart").click(function(){if(""==getCookie("login")||0==document.cookie.length)alert("请登录"),window.location.href="./login.html";else{alert("加入购物车成功");var e=JSON.parse(localStorage.getItem("cartList"))||[];if(e.some(function(e){return e.id===a.id})){for(var t=null,o=0;o<e.length;o++)if(e[o].id===a.id){t=e[o];break}t.num++,t.xiaoji=t.num*parseFloat(t.price)}else a.num=1,a.xiaoji=parseFloat(a.price),e.push(a);localStorage.setItem("cartList",JSON.stringify(e)),console.log(e),window.location.href="./list.html"}})});